/**
 * Zbox.js - Simple and flexible image viewer javascript library
 * @version v1.0.1
 * @license MIT
 * @copyright 2015 Lenon Mauer, Inc.
 * @link https://github.com/lenonmauer/zbox.js
 */
!function(){"use strict";window.Zbox=function(e){return this.main_div=null,this.overlay=null,this.modal=null,this.header=null,this.header_span=null,this.body=null,this.img=null,this.dimensions={},this.maxSize={},this.configs={querySelector:".zbox-img",overlayClick:!0,fadeTime:100,background:!0,loading:"<span>Loading image ...</span>",onerror:null},this.setConfigs(e),{show:t(this),hide:i(this),setConfigs:s(this)}};var t=function(t){return function(e){"object"==typeof e&&(e.preventDefault(),e=this),t.show(e)}},e=function(t){return function(){t.updateMaxSize()}},i=function(t){return function(){t.hide()}},s=function(t){return function(e){t.setConfigs(e)}};Zbox.prototype.setConfigs=function(t){this.configs=this.extend(t,this.configs),this.init()},Zbox.prototype.init=function(){this.createHTML(),this.addCSS(),this.addListeners(),this.updateMaxSize()},Zbox.prototype.createHTML=function(){null!=document.querySelector("#zbox")&&document.querySelector("#zbox").parentNode.removeChild(document.querySelector("#zbox")),this.main_div=document.createElement("div"),this.overlay=document.createElement("div"),this.modal=document.createElement("div"),this.header=document.createElement("div"),this.header_span=document.createElement("span"),this.body=document.createElement("div"),this.main_div.id="zbox",this.overlay.className="zbox-overlay",this.modal.className="zbox-modal",this.header.className="zbox-header",this.header_span.innerHTML="&times;",this.body.className="zbox-body",document.body.appendChild(this.main_div),this.main_div.appendChild(this.overlay),this.main_div.appendChild(this.modal),this.modal.appendChild(this.header),this.modal.appendChild(this.body),this.header.appendChild(this.header_span)},Zbox.prototype.addCSS=function(){this.main_div.style.opacity="0",this.main_div.style.display="none",this.overlay.style.display="inherit",this.overlay.style.zIndex="1040",this.overlay.style.position="fixed",this.overlay.style.background="rgba(255, 255, 255, 0.92)",this.overlay.style.left="0",this.overlay.style.top="0",this.overlay.style.padding="0",this.overlay.style.margin="0",this.overlay.style.height="100%",this.overlay.style.width="100%",this.modal.style.position="absolute",this.modal.style.zIndex="1040",this.modal.style.padding="0",this.modal.style.margin="0",this.modal.style.color="#666",this.modal.style.left="50%",this.modal.style.transform="translateX(-50%)",this.modal.style.webkitUserSelect="none",this.modal.style.userSelect="none",this.modal.style.mozUserSelect="none",this.header.style.textAlign="right",this.header.style.fontSize="44px",this.header.style.lineHeight="0",this.header.style.position="absolute",this.header.style.width="100%",this.header_span.style.cursor="pointer",this.header_span.style.margin="0 -11px 0 -11px",this.body.style.fontSize="1.2em",this.body.style.padding="0.5em",this.body.style.borderRadius="2px",this.configs.background&&(this.body.style.boxShadow="0.1em 0.5em 0.7em rgba(0, 0, 0, 0.25)",this.body.style.background="#fff")},Zbox.prototype.addListeners=function(){var s=document.querySelectorAll(this.configs.querySelector);if(s.length)for(var o=0;o<s.length;o++)s[o].addEventListener("click",t(this),!1);this.configs.overlayClick&&this.overlay.addEventListener("click",i(this),!1),this.header_span.addEventListener("click",i(this),!1),this.header_span.addEventListener("mouseover",function(t){t.target.style.color="#fbfbfb",t.target.style.textShadow="0px 1px 1px #000"},!1),this.header_span.addEventListener("mouseout",function(t){t.target.style.color="",t.target.style.textShadow=""},!1),window.onresize=e(this)},Zbox.prototype.updateMaxSize=function(){this.maxSize.height=.8*window.innerHeight,this.maxSize.width=.8*window.innerWidth},Zbox.prototype.show=function(t){var e=t.src||t.href||t,i=this,s=new Image,o=window.scrollY||document.documentElement.scrollTop;return e.length?"0"!=this.main_div.style.opacity?!1:(i.modal.style.top=30+o+"px",i.body.innerHTML=i.configs.loading,s.addEventListener("load",function(){null!=s&&(i.body.innerHTML="",i.dimensions.height=s.height,i.dimensions.width=s.width,i.changeDimensions(s),i.body.appendChild(s))}),s.addEventListener("error",function(){i.fade(i.main_div,"out",1),"function"==typeof i.configs.onerror&&i.configs.onerror()}),i.fade(i.main_div,"in",i.configs.fadeTime),void(s.src=e)):("function"==typeof this.configs.onerror&&this.configs.onerror(),!1)},Zbox.prototype.hide=function(){this.fade(this.main_div,"out",this.configs.fadeTime)},Zbox.prototype.fade=function(t,e,i,s){var o=t.style.opacity,n="out"==e?0:1,a=.02,s=s||function(){},i=i/(1/a),h=this;navigator.msPointerEnabled&&(i=1,a=.5),o.length||(o="out"==e?1:0),h.fade.interval&&clearInterval(h.fade.interval),h.fade.interval=setInterval(function(){o=parseFloat(o).toFixed(2),o="out"==e?parseFloat(o)-parseFloat(a):parseFloat(o)+parseFloat(a),t.style.opacity=o,a>=o?(t.style.display="none",t.style.opacity="0"):t.style.display="",o>=1&&(t.style.opacity="1"),(o>=n&&"in"==e||n>=o&&"out"==e)&&(s.call(),clearInterval(h.fade.interval))},i)},Zbox.prototype.changeDimensions=function(t){var e,i=this.dimensions.width>=this.dimensions.height?"width":"height";if(this.dimensions.width>this.maxSize.width&&this.dimensions.height>this.maxSize.height){var s="width"==i?"height":"width",o=this.maxSize[i]/(this.dimensions[i]/this.dimensions[s]);e=o>this.maxSize[s]?this.maxSize[i]*this.maxSize[s]/o:this.maxSize[i]}else this.dimensions.width>this.maxSize.width?(i="width",e=this.maxSize[i]):this.dimensions.height>this.maxSize.height?(i="height",e=this.maxSize[i]):e=this.dimensions[i];t.style[i]=e+"px"},Zbox.prototype.extend=function(t,e){"object"!=typeof t&&(t={});for(var i in t)"object"==typeof t[i]?e.hasOwnProperty(i)&&typeof t[i]==typeof e[i]&&(e[i]=this.extend(t[i],e[i])):e.hasOwnProperty(i)&&(e[i]=t[i]);return e}}(window);